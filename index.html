<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trejbal Clicker</title>
    <link href="./style.css" rel="stylesheet">
</head>
<body>
    
    <div class="container">
        <h1>Trejbal Clicker</h1>
        <button id="clickerButton"><img src="./unnamed.png" alt="">CLICK</button>
        <p>Napsaných javascriptů: <span id="clickCount">0</span>$</p>
        <p>Vyhozeno z maturit: <span id="rebirthCount">0</span>∑</p>
        <p>Rank: <b><span id="rank">Herrmann</span></b></p>
        <div class="image">
            <a href="https://www.youtube.com/watch?v=gDLobwJ-VYs"><img src="./martin-ezgif.com-resize.png" alt="Advertisement"></a>
        </div>
        <div class="image2">
            <a href="https://www.youtube.com/watch?v=B13JypT3WD4"><img src="./herrmannnew-ezgif.com-resize.png" alt="Advertisement"></a>
        </div>
        <div class="stats">
            <h2>Upgrady</h2>
            <button id="autoClicker">Auto Click  <span id="autoPrice">20</span>$ (+1/s)</button>
            <button id="multiClick">Plus Click <span id="multiPrice">10</span>$ (+0,5)</button>
            <button id="hyperClick">Sigma Click <span id="hyperPrice">5000</span>$ (+20)</button>
            <button id="autohyperClicker">Sigma Auto Click <span id="autohyperPrice">10000</span>$ (+50/s)</button>
            <button id="mangoClick">Mango Click <span id="mangoPrice">10000000</span>$ (+5000)</button>
            <button id="automangoClicker">Mango Auto Click <span id="automangoPrice">12000000</span>$ (+5000/s)</button>
            <h2>Vyhození z maturit</h2>
            <button id="rebirth">Vyhodit z maturity <span id="rebirthPrice">10000</span>$ (x1,1)</button> 
            <p>Vyhození z maturity boost: x<span id="rebirthBoost">1</span></p>

        <div class="rebirth-shop">
            <h2>Vyhození z maturity Shop</h2>
            <button id="rebirthUpgrade">Ultra Boost <span id="rebirthUpgradePrice">1</span>∑ (x2)</button>
        </div>
    </div>
    <script>
        let count = 0;
        let rebirths = 0;
        let clickValue = 1;
        let autoClickers = 0;
        let rebirthBoost = 1;
        let hyperClick = 0;
        let autohyperClickers = 0;
        let mangoClick = 0;
        let automangoClicker = 0;
        let autoClickerPrice = 20;
        let multiClickPrice = 10;
        let rebirthPrice = 10000;
        let rebirthUpgradePrice = 1;
        let hyperClickPrice = 5000;
        let autohyperClickerPrice = 20000;
        let mangoClickPrice = 10000000;
        let automangoClickerPrice = 1200000;
        let totalRebirths = 0;
        let keysPressed = {};
        
        document.getElementById("clickCount").textContent = count;
        document.getElementById("rebirthCount").textContent = rebirths;

        document.getElementById("clickerButton").addEventListener("click", function() {
            count += clickValue * rebirthBoost;
            document.getElementById("clickCount").textContent = count;
        });

        document.getElementById("autoClicker").addEventListener("click", function() {
            if (count >= autoClickerPrice) {
                count -= autoClickerPrice;
                autoClickers++;
                autoClickerPrice = Math.floor(autoClickerPrice * 2.2);
                document.getElementById("autoPrice").textContent = autoClickerPrice;
            }
        });

        document.getElementById("multiClick").addEventListener("click", function() {
            if (count >= multiClickPrice) {
                count -= multiClickPrice;
                clickValue+=0.5;
                multiClickPrice = Math.floor(multiClickPrice * 2.7);
                document.getElementById("multiPrice").textContent = multiClickPrice;
            }
        });
        document.getElementById("hyperClick").addEventListener("click", function() {
            if (count >= hyperClickPrice) {
                count -= hyperClickPrice;
                clickValue+=20;
                hyperClickPrice = Math.floor(hyperClickPrice * 2.7);
                document.getElementById("hyperPrice").textContent = hyperClickPrice;
            }
        });
        document.getElementById("autohyperClicker").addEventListener("click", function() {
            if (count >= autohyperClickerPrice) {
                count -= autohyperClickerPrice;
                autoClickers+=50;
                autohyperClickerPrice = Math.floor(autohyperClickerPrice * 2.2);
                document.getElementById("autohyperPrice").textContent = autohyperClickerPrice;
            }
        });
        document.getElementById("mangoClick").addEventListener("click", function() {
            if (count >= mangoClickPrice) {
                count -= mangoClickPrice;
                clickValue+=5000;
                mangoClickPrice = Math.floor(mangoClickPrice * 12);
                document.getElementById("mangoPrice").textContent = mangoClickPrice;
            }
        });
        document.getElementById("automangoClicker").addEventListener("click", function() {
            if (count >= automangoClickerPrice) {
                count -= automangoClickerPrice;
                autoClickers+=5000;
                automangoClickerPrice = Math.floor(automangoClickerPrice * 12);
                document.getElementById("automangoPrice").textContent = automangoClickerPrice;
            }
        });
        document.getElementById("rebirth").addEventListener("click", function() {
    if (count >= rebirthPrice) {
        count = 0;
        autoClickers = 0;
        clickValue = 1;
        rebirths++;
        rebirthBoost *= 1.1;
                rebirthPrice *= 3.2;
                autoClickerPrice = 20;
        multiClickPrice = 10;
        hyperClickPrice = 5000;
        autohyperClickerPrice = 10000;
        mangoClickPrice = 10000000;
        automangoClickerPrice = 12000000;
        document.getElementById("autoPrice").textContent = autoClickerPrice;
        document.getElementById("multiPrice").textContent = multiClickPrice;
        document.getElementById("rebirthPrice").textContent = rebirthPrice;
        document.getElementById("rebirthUpgradePrice").textContent = rebirthUpgradePrice;
        document.getElementById("hyperPrice").textContent = hyperClickPrice;
        document.getElementById("autohyperPrice").textContent = autohyperClickerPrice;
        document.getElementById("mangoPrice").textContent = mangoClickPrice;
        document.getElementById("automangoPrice").textContent = automangoClickerPrice;

        document.getElementById("rebirthCount").textContent = rebirths;
        document.getElementById("rebirthBoost").textContent = rebirthBoost.toFixed(1);
        document.getElementById("clickCount").textContent = count;
    }
});

        document.getElementById("rebirthUpgrade").addEventListener("click", function() {
            if (rebirths >= rebirthUpgradePrice) {
                rebirths -= rebirthUpgradePrice;
                rebirthBoost *= 2;
                rebirthUpgradePrice += 1;
                document.getElementById("rebirthCount").textContent = rebirths;
                document.getElementById("rebirthBoost").textContent = rebirthBoost;
                document.getElementById("rebirthUpgradePrice").textContent = rebirthUpgradePrice;
            }
        });

        function rebirth() {
    if (count >= rebirthPrice) {
        count = 0;
        rebirths += 1;
        totalRebirths += 1; // Přičteme totalRebirths
        rebirthBoost += 0.2;
        rebirthPrice *= 2;

        document.getElementById("rebirthCount").textContent = rebirths;
        document.getElementById("rebirthBoost").textContent = rebirthBoost.toFixed(1);
        document.getElementById("rebirthPrice").textContent = rebirthPrice;
        document.getElementById("totalRebirths").textContent = totalRebirths; // Aktualizujeme zobrazení

        updateRank();
        saveProgress();
    }
}

        setInterval(function() {
            count += autoClickers * rebirthBoost;
            document.getElementById("clickCount").textContent = count;
        }, 1000);

        document.addEventListener("keydown", function(event) {
            keysPressed[event.code] = true;
            if (keysPressed["Enter"] || keysPressed["Space"] ) {
                event.preventDefault();
            }
        });

        document.addEventListener("keyup", function(event) {
            delete keysPressed[event.code];
        });
        // Ranky podle počtu rebirthů
const ranks = [
    "Herrmann",        // 0 rebirthů
    "No way, jsi lepší jak Herrmann",            // 1 rebirth
    "skibidi sigma",         // 5 rebirthů
    "GrandMaster Baiter",            // 10 rebirthů
    "Ultimátní Trejbal licker",             // 25 rebirthů
    "YES KING",           // 50 rebirthů
    "Trejbalův oblíbený student",    // 100 rebirthů
    "Trejbal" // 200+ rebirthů
];

// Funkce na získání ranku podle rebirthů
function getRank(rebirths) {
    if (rebirths >= 20) return ranks[7];
    if (rebirths >= 10) return ranks[6];
    if (rebirths >= 8) return ranks[5];
    if (rebirths >= 5) return ranks[4];
    if (rebirths >= 3) return ranks[3];
    if (rebirths >= 2) return ranks[2];
    if (rebirths >= 1) return ranks[1];
    return ranks[0];
}

// Aktualizace ranku v UI
function updateRank() {
    document.getElementById("rank").textContent = getRank(rebirths);
}

function saveProgress() {
    localStorage.setItem("clickerProgress", JSON.stringify({
        count: count,
        rebirths: rebirths,
        rebirthBoost: rebirthBoost,
        rebirthPrice: rebirthPrice,
        totalRebirths: totalRebirths,
        rebirthUpgradePrice: rebirthUpgradePrice,
        clickValue: clickValue,
        autoClickers: autoClickers,
        hyperClick: hyperClick,
        autohyperClickers: autohyperClickers,
        mangoClick: mangoClick,
        automangoClicker: automangoClicker,
        autoClickerPrice: autoClickerPrice,
        multiClickPrice: multiClickPrice,
        hyperClickPrice: hyperClickPrice,
        autohyperClickerPrice: autohyperClickerPrice,
        mangoClickPrice: mangoClickPrice,
        automangoClickerPrice: automangoClickerPrice
    }));
}

function loadProgress() {
    const savedData = JSON.parse(localStorage.getItem("clickerProgress"));
    if (savedData) {
        count = savedData.count || 0;
        rebirths = savedData.rebirths || 0;
        rebirthBoost = savedData.rebirthBoost || 1;
        rebirthPrice = savedData.rebirthPrice || 1;
        totalRebirths = savedData.totalRebirths || 0;
        clickValue = savedData.clickValue || 1;
        autoClickers = savedData.autoClickers || 0;
        hyperClick = savedData.hyperClick || 0;
        autohyperClickers = savedData.autohyperClickers || 0;
        mangoClick = savedData.mangoClick || 0;
        automangoClicker = savedData.automangoClicker || 0;
        autoClickerPrice = savedData.autoClickerPrice || 20;
        multiClickPrice = savedData.multiClickPrice || 10;
        hyperClickPrice = savedData.hyperClickPrice || 5000;
        autohyperClickerPrice = savedData.autohyperClickerPrice || 20000;
        mangoClickPrice = savedData.mangoClickPrice || 10000000;
        automangoClickerPrice = savedData.automangoClickerPrice || 1200000;
        rebirthUpgradePrice = savedData.rebirthUpgradePrice || 1; // Přidáno načtení ceny upgradu!

        document.getElementById("clickCount").textContent = count;
        document.getElementById("rebirthCount").textContent = rebirths;
        document.getElementById("rebirthBoost").textContent = rebirthBoost.toFixed(1);
        document.getElementById("rebirthPrice").textContent = rebirthPrice;
        document.getElementById("autoPrice").textContent = autoClickerPrice;
        document.getElementById("multiPrice").textContent = multiClickPrice;
        document.getElementById("hyperPrice").textContent = hyperClickPrice;
        document.getElementById("autohyperPrice").textContent = autohyperClickerPrice;
        document.getElementById("mangoPrice").textContent = mangoClickPrice;
        document.getElementById("automangoPrice").textContent = automangoClickerPrice;
        updateRank();
    }
}

document.getElementById("rebirth").addEventListener("click", function() {
    if (count >= rebirthPrice) {
        count = 0;
        autoClickers = 0;
        clickValue = 1;
        rebirths++;
        rebirthBoost *= 1.1;
        rebirthPrice = Math.floor(rebirthPrice * 3.2);

        document.getElementById("clickCount").textContent = count;
        document.getElementById("rebirthCount").textContent = rebirths;
        document.getElementById("rebirthBoost").textContent = rebirthBoost.toFixed(1);
        document.getElementById("rebirthPrice").textContent = rebirthPrice;

        updateRank();
        saveProgress();
    }
});
setInterval(saveProgress, 5000);
window.addEventListener("beforeunload", saveProgress);

window.addEventListener("load", loadProgress);

document.getElementById("clickerButton").addEventListener("click", function() {
            let img = document.createElement("img");
            img.src = "./unnamed.png";
            img.classList.add("falling-image");
            img.style.left = Math.random() * window.innerWidth + "px";
            img.style.position = "absolute";
            img.style.top = "-50px";

            document.body.appendChild(img);

            setTimeout(() => img.remove(), 3000);
        });

// epic deletion
if (localStorage.getItem("resetGame") === "true") {
    localStorage.clear();
    localStorage.removeItem("resetGame");
    alert("TrejbalAC detekoval velice sus aktivitu. Necheatuj 😡😡😡");
}

// Epic blockation
(function() {
    const detectDevTools = function() {
        const threshold = 100;
        const start = performance.now();
        debugger;
        const end = performance.now();
        if (end - start > threshold) {
            document.body.innerHTML = "<h1 style='text-align: center; font-size: 50px;'>nuh uh</h1>";
        }
    };
    setInterval(detectDevTools, 1000);
})();

// Epic detection 
let lastCount = 0;
let lastCheckTime = Date.now();

setInterval(() => {
    let now = Date.now();
    let timeDiff = (now - lastCheckTime) / 1000;
    lastCheckTime = now;

    let manualClickPower = clickValue * rebirthBoost * 50; 
    let autoClickPower = autoClickers * rebirthBoost * 10; 
    let rebirthBonus = 5000 * rebirths; 
    let hyperClickBonus = hyperClick * 20; 
    let mangoClickBonus = mangoClick * 5000; 

    let maxPossibleGain = (manualClickPower + autoClickPower + rebirthBonus + hyperClickBonus + mangoClickBonus) * timeDiff * 10;

    if (count - lastCount > maxPossibleGain) { 
        setTimeout(() => {
            alert("Podvod detekován! Tvůj progress bude resetován.");
            localStorage.setItem("resetGame", "true"); 
            location.reload(); 
        }, 100);
    }
    lastCount = count;
}, 3000);

    </script>
</body>
</html>
